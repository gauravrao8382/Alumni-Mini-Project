<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Search • Alumni Directory</title>
    <link rel="stylesheet" href="/assets/css/search-shared.css" />
</head>
<body>
    <!-- Header replicated from dashboard -->
    <div class="header">
        <div><%= typeof name !== 'undefined' ? name : '' %> <br> <%= typeof address !== 'undefined' ? address : '' %></div>
        <div class="header-left">
            <a href="/search?email=<%=email%>">Search students</a>
            <a href="/events?email=<%=email%>">Events</a>
            <a href="/jobs">Posted jobs</a>
            <button onclick="window.location.href='/LogOutCollage'">Log out</button>
        </div>
    </div>

    <main class="page">
        <header class="page-header">
            <h1 id="pageTitle">Admin Search</h1>
            <p>Use smart filters to find alumni in your directory.</p>
        </header>

        <section class="layout">
            <aside class="filters" id="filtersSidebar">
                <div class="filter-group">
                    <h3>Year</h3>
                    <div class="segmented">
                        <label>
                            <input type="radio" name="yearType" value="passing" checked>
                            <span>Passing Year</span>
                        </label>
                        <label>
                            <input type="radio" name="yearType" value="admission">
                            <span>Admission Year</span>
                        </label>
                    </div>
                    <div class="field">
                        <select id="yearSelect">
                            <option value="">Any Year</option>
                            <option>2025</option>
                            <option>2024</option>
                            <option>2023</option>
                            <option>2022</option>
                            <option>2021</option>
                            <option>2020</option>
                        </select>
                    </div>
                </div>

                <div class="filter-group">
                    <h3>Batch</h3>
                    <div class="field">
                        <select id="batchSelect">
                            <option value="">Any Batch</option>
                            <option>2018–2022</option>
                            <option>2019–2023</option>
                            <option>2020–2024</option>
                            <option>2021–2025</option>
                            <option>2022–2026</option>
                        </select>
                    </div>
                </div>

                <div class="filter-group">
                    <h3>Course</h3>
                    <div class="chips" id="courseChips">
                        <button data-value="B.Tech">B.Tech</button>
                        <button data-value="BCA">BCA</button>
                        <button data-value="MCA">MCA</button>
                        <button data-value="M.Tech">M.Tech</button>
                        <button data-value="MBA">MBA</button>
                    </div>
                </div>

                <div class="filter-group">
                    <h3>Department</h3>
                    <div class="chips" id="deptChips">
                        <button data-value="CSE">CSE</button>
                        <button data-value="ECE">ECE</button>
                        <button data-value="EEE">EEE</button>
                        <button data-value="ME">ME</button>
                        <button data-value="IT">IT</button>
                    </div>
                </div>

                <div class="filter-group">
                    <h3>Gender</h3>
                    <div class="chips" id="genderChips">
                        <button data-value="Male">Male</button>
                        <button data-value="Female">Female</button>
                        <button data-value="Other">Other</button>
                    </div>
                </div>

                <div class="filter-group">
                    <h3>Location</h3>
                    <div class="field"><input type="text" id="cityInput" placeholder="City" /></div>
                    <div class="field"><input type="text" id="stateInput" placeholder="State" /></div>
                </div>

                <div class="filter-group">
                    <h3>Search</h3>
                    <div class="field"><input type="text" id="nameInput" placeholder="Name" /></div>
                    <div class="field"><input type="email" id="emailInput" placeholder="Email" /></div>
                    <div class="field"><input type="text" id="rollInput" placeholder="Roll Number" /></div>
                </div>

                <div class="actions">
                    <button class="primary" id="applyFiltersBtn">Apply Filters</button>
                    <button class="ghost" id="resetFiltersBtn">Reset</button>
                </div>
            </aside>

            <section class="results">
                <div id="resultsGrid" class="grid"></div>
                <div id="noResults" class="no-results" aria-live="polite">No Results Found</div>
            </section>
        </section>
    </main>

    <!-- Mobile Drawer for Filters -->
    <div class="drawer" id="filtersDrawer" aria-hidden="true">
        <div class="drawer-content">
            <div class="drawer-header">
                <h2>Filters</h2>
                <button class="icon" aria-label="Close" id="closeFiltersBtn">✕</button>
            </div>
            <div class="drawer-body"></div>
        </div>
        <div class="drawer-backdrop" id="drawerBackdrop"></div>
    </div>

    <footer class="footer"><p>© 2025 Alumni Management System</p></footer>

    <!-- Inject server data for shared search -->
    <script>
        const email = "<%= email %>";
        const serverAlumni = <%- JSON.stringify(alumniList.filter(a => a && a.collageEmail === email)) %>;
        window.initialPeople = serverAlumni.map(a => ({
            id: a.email,
            name: a.name || 'Unknown',
            email: a.email || '',
            roll: a.roll || '',
            course: a.course || 'N/A',
            dept: a.dept || 'N/A',
            batch: a.batch || (a.passingyear ? `${Number(a.passingyear)-4}–${a.passingyear}` : ''),
            yearType: 'passing',
            year: a.passingyear ? Number(a.passingyear) : null,
            gender: a.gender || 'Other',
            city: a.city || '',
            state: a.state || '',
            avatar: a.image || '/images/default-college.png',
            linkedin: a.linkedin || '',
            portfolio: a.portfolio || '',
            company: a.company || '',
            role: a.role || ''
        }));
    </script>
    <script src="/assets/js/search-shared.js"></script>
</body>
</html>